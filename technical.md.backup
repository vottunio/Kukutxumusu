# Roadmap T√©cnico Detallado - Proyecto NFT Kukuxumusu

## üìã RESUMEN EJECUTIVO DEL ENTREGABLE MVP (1 SEMANA)

### Capacidades del Producto Final
- **Conexi√≥n de Wallet**: Integraci√≥n con MetaMask y WalletConnect para interacci√≥n con la blockchain
- **Arquitectura Cross-Chain**: NFTs minteados en Story Protocol, pagos gestionados en Base
- **Smart Contract NFT (Story)**: Contrato ERC-721 verificado en Story Protocol para la creaci√≥n y gesti√≥n de NFTs
- **Smart Contract de Pagos (Base)**: Sistema de pagos multi-token (VTN, ETH, USDT) y gesti√≥n de subastas
- **Sistema de Subastas**: Mecanismo para pujar por NFTs durante un periodo determinado con listado de bidders (en Base)
- **Compra por Ganador**: Proceso automatizado cross-chain para que el ganador de la subasta reciba el NFT
- **Galer√≠a de NFTs**: Exploraci√≥n completa de los NFTs ya minteados/comprados con filtros y b√∫squeda
- **Panel Administrativo**: Dashboard protegido para que el equipo de Kukuxumusu pueda subir nuevos NFTs
- **Visualizaci√≥n del Saldo**: Dashboard p√∫blico que muestra el balance de la treasury y estad√≠sticas
- **Almacenamiento Descentralizado**: Todas las im√°genes y metadatos almacenados en IPFS v√≠a Pinata

### Stack Tecnol√≥gico
- **Blockchain (NFTs)**: Story Protocol - Smart Contract ERC-721 para minteo de NFTs
- **Blockchain (Pagos)**: Base - Smart Contract para pagos multi-token y subastas
- **Tokens de Pago Aceptados**: VTN, ETH (nativo), USDT (ERC-20)
- **Frontend**: Next.js + TypeScript + Tailwind CSS
- **Web3**: Integraci√≥n con wagmi/viem para conexi√≥n multi-chain de wallets
- **Backend/Relayer**: Servicio Node.js que conecta eventos de Base con Story Protocol
- **Storage**: IPFS/Pinata para im√°genes y metadatos
- **Hosting**: AWS EC2 con Docker para frontend y backend/relayer

### Entregables T√©cnicos
- Smart contract NFT desplegado y verificado en Story Protocol mainnet
- Smart contract de Pagos desplegado y verificado en Base mainnet
- Backend/Relayer para comunicaci√≥n cross-chain entre Base y Story
- Frontend responsive desplegado en dominio personalizado con soporte multi-chain
- Sistema de subida de NFTs para administradores
- Documentaci√≥n t√©cnica completa
- C√≥digo fuente en repositorio GitHub

### Limitaciones del MVP
- Sin funcionalidades DAO (previsto para Fase 2)
- Panel administrativo con funciones b√°sicas
- Sin integraci√≥n con marketplaces externos
- Sin auditor√≠a completa de smart contracts (solo review b√°sica)
- Explore con filtros b√°sicos (versi√≥n avanzada en Fase 2)
- Sin herramientas de an√°lisis avanzado de datos
- Monitoreo b√°sico (sin sistema completo de alertas)

### Gesti√≥n Econ√≥mica y Transparencia
- **Treasury Wallet (Base)**: Implementaci√≥n de wallet multisig dedicada en Base para recibir todos los fondos de ventas en VTN, ETH y USDT
- **Dashboard P√∫blico**: P√°gina p√∫blica que muestra en tiempo real el n√∫mero de NFTs vendidos y balance de la treasury en Base
- **Smart Contracts Verificados**: C√≥digo de ambos contratos (Base y Story) verificados en sus respectivos exploradores de bloques
- **Funci√≥n withdraw**: S√≥lo la wallet autorizada de Kukuxumusu podr√° retirar los fondos acumulados en Base
- **Royalties**: Configuraci√≥n de royalties del 5-10% en ventas secundarias que se env√≠an autom√°ticamente a la treasury
- **Transparencia Cross-Chain**: Todos los eventos de pagos en Base est√°n vinculados con los NFTs minteados en Story

### Arquitectura de la Aplicaci√≥n

#### Frontend (Single Page Application)
- **Tecnolog√≠a**: Next.js + React + TypeScript + Tailwind CSS
- **Estructura**: Una √∫nica aplicaci√≥n web con m√∫ltiples p√°ginas/secciones
- **P√°ginas principales**:
  - Home: Presentaci√≥n del proyecto y destacados
  - Subastas/Mint: Interfaz para m√∫ltiples subastas simult√°neas y compra directa
  - Explore: Galer√≠a completa con filtros y b√∫squeda
  - Dashboard P√∫blico: Estad√≠sticas y transparencia
  - Dashboard Admin: Panel protegido para gesti√≥n (acceso restringido)

#### Backend - Arquitectura Cross-Chain

**Smart Contract de Pagos (Base)**
- Gesti√≥n de pagos multi-token (VTN, ETH, USDT)
- Sistema de m√∫ltiples subastas simult√°neas con tiempo l√≠mite
- Registro de bidders y determinaci√≥n de ganadores
- Treasury multisig para custodia de fondos
- Eventos on-chain: `PaymentReceived`, `AuctionCreated`, `BidPlaced`, `AuctionWon`
- Cada puja (bid) se registrar√° como un evento on-chain para garantizar total transparencia y verificabilidad
- Los eventos `BidPlaced` contendr√°n toda la informaci√≥n de la puja (bidder, monto, timestamp, tokenId)

**Smart Contract NFT (Story Protocol)**
- Minteo de NFTs ERC-721 con metadatos en IPFS
- Control de acceso: solo el backend/relayer autorizado puede mintear
- Funci√≥n de transferencia autom√°tica al ganador de subasta
- Royalties configurados para ventas secundarias

**Backend/Relayer (Node.js)**
- Escucha eventos de pagos exitosos en Base (`PaymentReceived`, `AuctionWon`)
- Ejecuta mint autom√°tico de NFT en Story Protocol
- Transfiere NFT al comprador/ganador
- Mantiene registro de transacciones cross-chain
- API para consultar estado de transacciones pendientes

**API Services**
- Integrados en Next.js mediante API routes
- Endpoints para consultar datos cross-chain
- Cache de metadata de NFTs

**Almacenamiento**:
  - IPFS/Pinata: Im√°genes y metadatos de NFTs
    - Im√°genes originales: 2000x2000px (1:1), formato PNG/JPG, m√°x 10MB, con transparencia opcional
    - Versiones optimizadas autom√°ticamente generadas:
      - Thumbnail (galer√≠a): 400x400px
      - Media (cards): 800x800px
      - Full (vista detalle): 2000x2000px original
    - Metadatos: Est√°ndar ERC-721 JSON con atributos/traits
- Base de datos: Informaci√≥n auxiliar, cach√© y tracking cross-chain

#### Despliegue
- **Frontend/Backend/Relayer**: AWS EC2 con contenedores Docker
- **Containerizaci√≥n**: Docker + Docker Compose para entornos consistentes
- **CI/CD**: Pipeline automatizado para build y deploy de contenedores
- **Smart Contract de Pagos**: Desplegado y verificado en Base mainnet
- **Smart Contract NFT**: Desplegado y verificado en Story Protocol mainnet
- **Relayer Service**: Servicio persistente con reintentos autom√°ticos para garantizar mints
- **Dominio**: Configuraci√≥n de dominio personalizado con SSL/TLS
- **Escalabilidad**: Posibilidad de escalar horizontalmente con m√∫ltiples instancias EC2
- **Monitoring**: CloudWatch para tracking de eventos cross-chain y alertas

## üöÄ SEMANA 1 - DESARROLLO MVP

### D√çA 1 (LUNES) - FUNDAMENTOS BASE

#### Blockchain Development (Smart Contracts)
**Smart Contract √önico ERC-721 Base**
- [ ] Crear contrato base NFT con herencia ERC-721 (contrato √∫nico para toda la colecci√≥n)
- [ ] Implementar funci√≥n mint b√°sica con controls
- [ ] A√±adir funci√≥n setBaseURI para metadatos
- [ ] Implementar ownership controls (onlyOwner)
- [ ] Configurar treasury wallet como destinatario de fondos
- [ ] Crear testing unitario b√°sico para funciones core

**Testing y Validaci√≥n Inicial**
- [ ] Deploy contrato en Base testnet
- [ ] Verificar contrato en block explorer
- [ ] Test manual de funciones b√°sicas
- [ ] Configurar wallet de testing con fondos

#### Frontend Development
**Setup Proyecto Frontend**
- [ ] Configurar Next.js con TypeScript
- [ ] Setup Tailwind CSS y configuraci√≥n de theme
- [ ] Instalar y configurar wagmi + viem para Web3
- [ ] Crear estructura de componentes base (Header, Footer, Layout)

**Conexi√≥n Blockchain Base**
- [ ] Implementar conexi√≥n wallet (MetaMask)
- [ ] Crear hook para interactuar con contrato
- [ ] Setup providers y configuraci√≥n de redes
- [ ] Test b√°sico de lectura de contrato

#### Infraestructura (IPFS/Storage)
**Setup IPFS**
- [ ] Configurar cuenta Pinata y API keys
- [ ] Crear funciones de upload a IPFS
- [ ] Implementar generaci√≥n de metadata JSON seg√∫n est√°ndar ERC-721
- [ ] Configurar validaci√≥n de im√°genes originales (2000x2000px, formato PNG/JPG, m√°x 10MB)
- [ ] Implementar generaci√≥n autom√°tica de versiones optimizadas (400x400px, 800x800px)
- [ ] Test de subida de imagen b√°sica y verificaci√≥n de calidad

**üìã Entregables D√≠a 1:**
- Smart contract funcional en testnet
- Frontend con conexi√≥n wallet working
- IPFS configurado y probado

---

### D√çA 2 (MARTES) - FUNCIONALIDAD CORE DE MINT

#### Blockchain Development
**Completar Funcionalidades del Smart Contract √önico**
- [ ] A√±adir funci√≥n pausable/unpausable al contrato principal
- [ ] Implementar withdraw funds para owner
- [ ] A√±adir controls de max supply y precio
- [ ] Implementar funci√≥n setPrice para admin
- [ ] Desarrollar sistema de m√∫ltiples subastas simult√°neas con tiempo l√≠mite (dentro del mismo contrato)
- [ ] Crear funciones para registrar y listar bidders en cada subasta
- [ ] Implementar l√≥gica de determinaci√≥n de ganador
- [ ] Testing completo de todas las funciones

**Funciones Admin Avanzadas del Contrato √önico**
- [ ] Crear funci√≥n batch mint para admin (a√±adir m√∫ltiples NFTs a la colecci√≥n)
- [ ] A√±adir eventos importantes on-chain (Minted, PriceChanged, AuctionCreated, BidPlaced)
- [ ] Asegurar que cada puja quede registrada como evento inmutable en la blockchain
- [ ] Implementar funci√≥n emergency pause
- [ ] Documentar todas las funciones del contrato

#### Frontend Development
**P√°gina de Mint y Subastas UI**
- [ ] Crear componente MintPage con dise√±o
- [ ] Implementar preview de NFT antes del mint con visualizaci√≥n a tama√±o completo (2000x2000px)
- [ ] A√±adir validaciones de frontend (balance, conexi√≥n)
- [ ] Crear componente de selecci√≥n de cantidad
- [ ] Dise√±ar interfaz de subastas con contador
- [ ] Implementar formulario para realizar pujas
- [ ] Crear listado de bidders en tiempo real

**Integraci√≥n Mint y Subastas Completa**
- [ ] Conectar UI con funciones de smart contract
- [ ] Implementar estados de transacci√≥n (pending, success, error)
- [ ] A√±adir feedback visual para cada estado
- [ ] Implementar manejo de errores de Web3
- [ ] Integrar sistema de subastas con el frontend
- [ ] Desarrollar l√≥gica para actualizar pujas en tiempo real
- [ ] Implementar notificaciones para ganadores de subastas
- [ ] Testing responsive en dispositivos m√≥viles

**üìã Entregables D√≠a 2:**
- Sistema de mint funcional end-to-end
- Sistema de subastas con listado de bidders implementado
- Interface de usuario pulida para mint y subastas
- Validaciones y manejo de errores completo
- Proceso automatizado para compra por ganador de subasta

---

### D√çA 3 (MI√âRCOLES) - DASHBOARD ADMINISTRATIVO

#### Frontend Development - Dashboard Admin
**Interface Admin Base**
- [ ] Crear p√°gina admin con autenticaci√≥n por wallet
- [ ] Implementar protecci√≥n de rutas admin
- [ ] Crear formulario de subida de NFTs
- [ ] Implementar preview de im√°genes antes de subir con verificaci√≥n de dimensiones (2000x2000px)

**Funcionalidad Upload NFTs**
- [ ] Integrar formulario con IPFS upload
- [ ] Crear generaci√≥n autom√°tica de metadata JSON con est√°ndar ERC-721 completo
- [ ] Implementar validaci√≥n de formatos de imagen (2000x2000px, PNG/JPG, m√°x 10MB)
- [ ] Configurar generaci√≥n autom√°tica de versiones optimizadas para galer√≠a y cards
- [ ] A√±adir progress bars para uploads

#### Blockchain Development - Soporte Admin
**Optimizaci√≥n y Auditor√≠a**
- [ ] Optimizar gas consumption del contrato
- [ ] A√±adir natspec documentation completa
- [ ] Crear script de deployment automatizado
- [ ] Preparar contrato para review de seguridad b√°sica

**Testing Integraci√≥n Dashboard**
- [ ] Test completo del flow admin de subida
- [ ] Verificar metadata correcta en IPFS
- [ ] Test de mint de NFTs reci√©n a√±adidos
- [ ] Validar que URIs se generan correctamente

**üìã Entregables D√≠a 3:**
- Dashboard admin completamente funcional
- Sistema de upload de NFTs working
- Metadatos generados correctamente en IPFS

---

### D√çA 4 (JUEVES) - P√ÅGINA EXPLORE Y GALER√çA

#### Frontend Development - P√°gina Explore
**Base de Galer√≠a**
- [ ] Crear layout de galer√≠a responsive
- [ ] Implementar componente NFTCard individual con im√°genes de resoluci√≥n media (800x800px)
- [ ] Conectar con datos del blockchain (tokenURI)
- [ ] Crear sistema de loading para im√°genes con diferentes resoluciones (thumbnails 400x400px para galer√≠a)
- [ ] Implementar secci√≥n de estad√≠sticas de ventas y transparencia

**Funcionalidades Avanzadas Explore**
- [ ] Implementar filtros por atributos/traits
- [ ] A√±adir b√∫squeda por token ID u owner
- [ ] Crear sistema de paginaci√≥n eficiente
- [ ] Implementar lazy loading para performance
- [ ] A√±adir estados de loading y error handling

#### Blockchain Development - APIs y Utilities
**Backend Support**
- [ ] Crear utility functions para parsear metadata
- [ ] Implementar funci√≥n getAllTokens optimizada
- [ ] Crear endpoints para servir metadata si es necesario
- [ ] Optimizar queries al blockchain para rendimiento

**üìã Entregables D√≠a 4:**
- P√°gina Explore completamente funcional
- Sistema de filtros y b√∫squeda operativo
- Performance optimizada para carga de NFTs

---

### D√çA 5 (VIERNES) - TESTING, DEPLOY Y FINALIZACI√ìN

#### Testing Completo
**Frontend Testing:**
- [ ] Test end-to-end de todos los user flows
- [ ] Test de responsive design en diferentes dispositivos
- [ ] Test de performance y optimizaci√≥n de carga
- [ ] Validaci√≥n de accesibilidad b√°sica

**Backend Testing:**
- [ ] Test completo de todas las funciones del contrato
- [ ] Test de integraci√≥n con IPFS
- [ ] Validaci√≥n de metadata generada
- [ ] Test de gas costs y optimizaci√≥n

#### Deploy a Producci√≥n
**Blockchain Deploy:**
- [ ] Deploy final del contrato en Base mainnet
- [ ] Verificar contrato en block explorer
- [ ] Configurar ownership correctamente
- [ ] Configurar treasury wallet multisig
- [ ] Crear backup seguro de private keys

**Frontend/Backend Deploy:**
- [ ] Build optimizado para producci√≥n
- [ ] Crear im√°genes Docker para frontend y servicios
- [ ] Setup de Docker Compose para entorno de producci√≥n
- [ ] Deploy en AWS EC2 con configuraci√≥n de seguridad
- [ ] Configurar dominio personalizado con Route 53
- [ ] Setup SSL/TLS con certificados gestionados
- [ ] Configuraci√≥n de balanceador de carga si es necesario
- [ ] Implementar dashboard p√∫blico de transparencia

#### Testing Final y Documentaci√≥n
- [ ] Test completo en mainnet con fondos reales
- [ ] Verificaci√≥n de todas las funcionalidades
- [ ] Crear documentaci√≥n t√©cnica para handover
- [ ] Preparar demo para presentaci√≥n final
- [ ] Setup monitoring y alertas b√°sicas
- [ ] Configurar auto-scaling para EC2 si es necesario
- [ ] Implementar backup automatizado de la base de datos

**üìã Entregables D√≠a 5:**
- MVP completamente deployed en producci√≥n
- Documentaci√≥n t√©cnica completa
- Sistema listo para demo con Kukuxumusu

---

## ‚úÖ CHECKLIST FINAL DE ENTREGABLES

### Smart Contract √önico ‚úÖ
- [ ] Contrato ERC-721 √∫nico deployed y verificado en Base mainnet
- [ ] Funciones mint, pause, withdraw, setPrice implementadas
- [ ] Sistema de m√∫ltiples subastas simult√°neas con tiempo l√≠mite y registro de bidders (en el mismo contrato)
- [ ] Proceso automatizado para la compra del ganador de la subasta
- [ ] Sistema de ownership y access controls
- [ ] Funcionalidad para NFTs con venta directa y NFTs para subasta
- [ ] Testing unitario exhaustivo (>90% coverage)
- [ ] Documentaci√≥n t√©cnica del contrato
- [ ] Treasury wallet multisig configurada
- [ ] Implementaci√≥n de transparencia en ventas
- [ ] Configuraci√≥n de royalties para mercado secundario
- [ ] Almacenamiento del historial de subastas y pujas como eventos on-chain para total transparencia

### Frontend Application ‚úÖ
- [ ] Conexi√≥n multi-wallet (MetaMask, WalletConnect)
- [ ] P√°gina de subastas con visualizaci√≥n de m√∫ltiples subastas activas y listado de bidders en tiempo real
- [ ] Interface para realizar pujas con contador de tiempo
- [ ] Notificaciones para ganadores de subastas
- [ ] P√°gina explore con filtros y b√∫squeda
- [ ] Dashboard admin protegido y funcional
- [ ] Dise√±o responsive para todos los dispositivos
- [ ] Estados de loading, error y success
- [ ] Dashboard p√∫blico de transparencia con estad√≠sticas de ventas
- [ ] Visualizaci√≥n del balance de la treasury wallet
- [ ] Historial de subastas pasadas

### Backend & Infrastructure ‚úÖ
- [ ] Integraci√≥n IPFS con Pinata para storage
- [ ] Sistema de upload de im√°genes y generaci√≥n de metadata
- [ ] APIs para obtener datos de NFTs
- [ ] Sistema de autenticaci√≥n admin por wallet

### Deploy & Operations ‚úÖ
- [ ] Aplicaci√≥n dockerizada y deployed en AWS EC2
- [ ] Configuraci√≥n de seguridad de AWS implementada
- [ ] Dominio personalizado con Route 53
- [ ] SSL/TLS configurado y funcionando
- [ ] Backup de keys y configuraciones cr√≠ticas
- [ ] Monitoring b√°sico con CloudWatch
- [ ] Documentaci√≥n de deploy y mantenimiento
- [ ] Procedimientos de escalado y recuperaci√≥n

---

## üéØ CRITERIOS DE √âXITO MVP

### Funcionalidad ‚úÖ
- [ ] Cualquier usuario puede conectar wallet y participar en subastas
- [ ] Sistema de m√∫ltiples subastas simult√°neas funciona correctamente con tiempo l√≠mite
- [ ] Listado de bidders se actualiza en tiempo real con datos verificables on-chain
- [ ] Proceso de compra automatizado para el ganador de la subasta
- [ ] Admin puede subir nuevos NFTs v√≠a dashboard
- [ ] Los NFTs aparecen correctamente en la p√°gina explore
- [ ] Metadata se almacena correctamente en IPFS
- [ ] Sistema de precios y controls funciona
- [ ] Treasury wallet recibe correctamente los fondos de ventas
- [ ] Dashboard de transparencia muestra datos precisos y actualizados
- [ ] Solo wallets autorizadas pueden retirar fondos
- [ ] Historial de subastas y pujas accesible y verificable on-chain mediante eventos

### Experiencia de Usuario ‚úÖ
- [ ] Proceso de mint simple y claro (< 3 clics)
- [ ] Feedback claro en cada paso del proceso
- [ ] Dise√±o mobile-first responsive
- [ ] Tiempo de carga < 3 segundos
- [ ] Manejo elegante de errores

### T√©cnico ‚úÖ
- [ ] Cero bugs cr√≠ticos en producci√≥n
- [ ] Contrato optimizado para gas
- [ ] Frontend optimizado para performance
- [ ] Contenedores Docker optimizados
- [ ] C√≥digo bien documentado
- [ ] Testing coverage adecuado
- [ ] Configuraci√≥n de CI/CD para despliegue autom√°tico

**üöÄ ¬øListo para comenzar el desarrollo?**